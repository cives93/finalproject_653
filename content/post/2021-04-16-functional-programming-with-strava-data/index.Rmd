---
title: "Functional Programming with Strava Data"
author: "R package build"
date: '2021-04-16'
slug: functional-programming-with-strava-data
categories: R
tags:
- R
- Strava
---


```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = FALSE)
#note: include = FALSE and echo = FALSE for now, but it will still print messages and can be coerced to show full chunks of code if we desire

library(tidyverse)
library(purrr)
library(repurrrsive)
library(here)
library(janitor)
library(lubridate)

```

```{r firststep}

print("See things here")

a <- 8
b <- 9

print(a+b)



```

Strava url(http://labs.strava.com) is a data rich platform to collect, store, and use physical activity data. One key challenge faced by many sporting enthusiasts is how to effectively take control of their own data to make novel and interesting visualizations or depictions of one's hard work. In some senses, Strava makes this easy by packing your data for you with options on how you wish to view your achievements. For the DIY'er, the story is a little more complicated. As we've outlined above with the reading in of your personal Strava data, there is a consistent theme of following key steps to have our data ready for your most creative projects.

The following code chunk takes data from the prior API calls and tidy's a dataframe for use. There are a few functions embedded that whittle down the incoming data to it's most essential features and also excludes activities that you don't do very often (e.g., that one time you went stand up paddle boarding and recorded it on Strava). 
```{r secondstep}
#reading in data for sandbox
strav_data <- read_csv(here("content/post/2021-04-16-functional-programming-with-strava-data/data", "strav_csv.csv"))

#initial function for tidying Stravadata
tidyfunc <- function(strav_data) {
strav_data %>% 
  select(where(~length(unique(.)) > 1)) %>%
  clean_names() %>% 
  mutate_if(is.numeric, ~round(., 2)) %>% 
  filter(type != "Swim") %>% 
  mutate(type = as.factor(type)) %>% 
  separate(start_date_local, c("date","time"), sep = " ") %>% 
  select(-start_date)
}

#Function taken directly from Lab3 to determine percentage of each activity in dataset
# Using proportions could be useful to select only the most common activities (e.g., >5%)
proportions_activity <- function(activities) {
  map_dbl(split(activities, activities), length) / length(activities)
}

tidy1 <- tidyfunc(strav_data)
a <- proportions_activity(tidy1$type)




```


```{r thirdstep}

````


```{r fourthstep}

````




